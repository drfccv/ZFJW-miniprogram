<!--classroom.wxml-->
<view class="container">
  <!-- æŸ¥è¯¢æ¡ä»¶ -->
  <view class="query-section">
    <view class="section-title">æŸ¥è¯¢æ¡ä»¶</view>
    
    <!-- æ—¥æœŸé€‰æ‹© -->
    <view class="condition-item">
      <view class="condition-label">æŸ¥è¯¢æ—¥æœŸ</view>
      <picker mode="date" value="{{currentDate}}" bindchange="onDateChange">
        <view class="picker-input">
          <text>{{currentDate}}</text>
          <text class="picker-arrow">â–¼</text>
        </view>
      </picker>
    </view>
    
    <!-- æ—¶é—´æ®µé€‰æ‹© -->
    <view class="condition-item">
      <view class="condition-label">æ—¶é—´æ®µ</view>
      <view class="time-slots">
        <view class="time-slot {{currentSlot === index ? 'active' : ''}}" 
              wx:for="{{timeSlots}}" wx:key="index"
              bindtap="selectTimeSlot" data-index="{{index}}">
          {{item}}
        </view>
      </view>
    </view>
    
    <!-- æŸ¥è¯¢æŒ‰é’® -->
    <button class="query-btn" bindtap="queryClassrooms" disabled="{{loading}}">
      <text wx:if="{{loading}}">æŸ¥è¯¢ä¸­...</text>
      <text wx:else>æŸ¥è¯¢ç©ºæ•™å®¤</text>
    </button>
  </view>
  
  <!-- æŸ¥è¯¢ç»“æœ -->
  <view class="result-section" wx:if="{{classrooms.length > 0}}">
    <view class="section-title">
      ç©ºæ•™å®¤åˆ—è¡¨ ({{classrooms.length}}é—´)
    </view>
    
    <view class="classroom-list">
      <view class="building-group" wx:for="{{groupedClassrooms}}" wx:key="building">
        <view class="building-header">
          <view class="building-name">{{item.building}}</view>
          <view class="building-count">{{item.rooms.length}}é—´</view>
        </view>
        
        <view class="room-grid">
          <view class="room-item" wx:for="{{item.rooms}}" wx:key="room" wx:for-item="room">
            <view class="room-number">{{room.roomNumber}}</view>
            <view class="room-info">
              <text class="room-capacity">{{room.capacity}}äºº</text>
              <text class="room-type">{{room.type}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
  
  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && classrooms.length === 0 && hasQueried}}">
    <view class="empty-icon">ğŸ¢</view>
    <view class="empty-text">è¯¥æ—¶é—´æ®µæš‚æ— ç©ºæ•™å®¤</view>
    <view class="empty-desc">è¯·å°è¯•é€‰æ‹©å…¶ä»–æ—¶é—´æ®µ</view>
  </view>
  
  <!-- ä½¿ç”¨è¯´æ˜ -->
  <view class="help-section" wx:if="{{!hasQueried}}">
    <view class="section-title">ä½¿ç”¨è¯´æ˜</view>
    <view class="help-content">
      <view class="help-item">
        <view class="help-icon">ğŸ“…</view>
        <view class="help-text">é€‰æ‹©è¦æŸ¥è¯¢çš„æ—¥æœŸ</view>
      </view>
      <view class="help-item">
        <view class="help-icon">â°</view>
        <view class="help-text">é€‰æ‹©æ—¶é—´æ®µ</view>
      </view>
      <view class="help-item">
        <view class="help-icon">ğŸ”</view>
        <view class="help-text">ç‚¹å‡»æŸ¥è¯¢æŒ‰é’®è·å–ç»“æœ</view>
      </view>
    </view>
  </view>
</view>
