<!--é¦–é¡µ-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card" wx:if="{{userInfo}}" bindtap="goToProfileDetail">
    <view class="user-avatar">
      <text class="avatar-text">{{userInfo.name ? userInfo.name.charAt(0) : 'å­¦'}}</text>
    </view>
    <view class="user-info">
      <text class="user-name">{{userInfo.name || 'æœªè·å–åˆ°å§“å'}}</text>
      <text class="user-id">å­¦å·ï¼š{{userInfo.sid || 'æœªè·å–åˆ°å­¦å·'}}</text>
    </view>
    <view class="weather-info" wx:if="{{weather}}">
      <text class="weather">{{weather}}</text>
    </view>
  </view>

  <!-- å¿«æ·åŠŸèƒ½ -->
  <view class="quick-actions">
    <text class="section-title">å¿«æ·åŠŸèƒ½</text>
    <view class="actions-grid">
      <view class="action-item" bindtap="navigateTo" data-url="/pages/grade/grade">
        <view class="action-icon grade-icon">ğŸ“Š</view>
        <text class="action-text">æˆç»©æŸ¥è¯¢</text>
      </view>
      <view class="action-item" bindtap="navigateTo" data-url="/pages/exam/exam">
        <view class="action-icon exam-icon">ğŸ“</view>
        <text class="action-text">è€ƒè¯•å®‰æ’</text>
      </view>
      <view class="action-item" bindtap="navigateTo" data-url="/pages/course/course">
        <view class="action-icon course-icon">ğŸ“š</view>
        <text class="action-text">é€‰è¯¾ç®¡ç†</text>
      </view>
      <view class="action-item" bindtap="navigateTo" data-url="/pages/notification/notification">
        <view class="action-icon notification-icon">ğŸ“¢</view>
        <text class="action-text">é€šçŸ¥å…¬å‘Š</text>
      </view>
    </view>
  </view>

  <!-- æœ€è¿‘é€šçŸ¥ -->
  <view class="recent-notifications" wx:if="{{notifications.length > 0}}">
    <view class="notification-header">
      <text class="section-title">æœ€æ–°é€šçŸ¥</text>
      <text class="update-time" wx:if="{{notificationUpdateTime}}">ï¼ˆ{{notificationUpdateTime}}ï¼‰</text>
    </view>
    <view class="notification-list">
      <view 
        class="notification-item" 
        wx:for="{{notifications}}" 
        wx:key="index"
        bindtap="viewNotification"
        data-index="{{index}}"
      >
        <view class="notification-content">
          <text class="notification-title">{{item.title}}</text>
          <text class="notification-summary">{{item.content}}</text>
          <text class="notification-time">{{item.time}}</text>
        </view>
        <view class="notification-arrow">ã€‰</view>
      </view>
    </view>
  </view>

  <!-- ç™»å½•æç¤º -->
  <view class="login-prompt" wx:if="{{!isLoggedIn}}">
    <text class="prompt-title">è¯·å…ˆç™»å½•</text>
    <text class="prompt-text">ç™»å½•åå¯æŸ¥çœ‹è¯¾è¡¨ã€æˆç»©ç­‰ä¿¡æ¯</text>
    <button class="login-button" bindtap="goToLogin">å»ç™»å½•</button>
  </view>
</view>